<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Try Slide - Age Test</title>
</head>
<body>
  <h1>Patrik Balazsy - Website Currently Under Construction</h1>

     <a href="https://www.shutterstock.com/image-vector/black-silhouette-construction-site-isolated-600nw-2255730585.jpg" target="_blank">
    <img src="https://www.shutterstock.com/image-vector/black-silhouette-construction-site-isolated-600nw-2255730585.jpg" 
         alt="Construction Site Silhouette" 
         width="600">
  </a>

  <!-- Save Age Form -->
  <h2>Save Your Age</h2>
  <form id="saveForm">
    Name: <input type="text" id="saveName" required><br>
    Age: <input type="number" id="saveAge" required><br>
    <button type="submit">Save Age</button>
  </form>
  <pre id="saveResult"></pre>

  <!-- Get Age Form -->
  <h2>Retrieve Your Age</h2>
  <form id="getForm">
    Name: <input type="text" id="getName" required><br>
    <button type="submit">Get Age</button>
  </form>
  <pre id="getResult"></pre>

  <script>
    const saveForm = document.getElementById('saveForm');
    const saveResult = document.getElementById('saveResult');

    saveForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const name = document.getElementById('saveName').value;
      const age = parseInt(document.getElementById('saveAge').value, 10);

      const res = await fetch('/.netlify/functions/save-age', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ name, age })
      });

      const data = await res.json();
      saveResult.textContent = JSON.stringify(data, null, 2);
    });

    const getForm = document.getElementById('getForm');
    const getResult = document.getElementById('getResult');

    getForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const name = document.getElementById('getName').value;

      const res = await fetch(`/.netlify/functions/get-age?name=${encodeURIComponent(name)}`);
      const data = await res.json();
      getResult.textContent = JSON.stringify(data, null, 2);
    });
  </script>
</body>
</html>
